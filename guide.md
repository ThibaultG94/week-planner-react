# Guide de développement WeekPlanner

## 1. État Actuel du Projet (15/12/2024)

### 1.1 Frontend (En cours)

- Application React fonctionnelle avec drag & drop
- Interface d'authentification implémentée :
  - ✓ AuthContext avec Supabase
  - ✓ Formulaires de connexion/inscription
  - ✓ Bannière d'avertissement pour utilisateurs non connectés
- En attente :
  - Migration des données localStorage vers Supabase
  - Adaptation du TaskContext pour Supabase

### 1.2 Backend (Complété)

- Supabase configuré :

  ```sql
  Table users (
    id uuid primary key,
    created_at timestamptz default now(),
    email text unique,
    display_name text
  )

  Table tasks (
    id bigint generated by default as identity not null,
    created_at timestamp with time zone not null default now(),
    title text not null,
    note text null,
    location_type text not null default 'parking'::text,
    day text null,
    period text null,
    position bigint not null default '0'::bigint,
    completed boolean not null default false,
    user_id uuid references public.users(id)
  )
  ```

- RLS configuré

## 2. Prochaine Étape : Migration vers Supabase

### 2.1 TaskContext

1. Modifier TaskContext pour utiliser l'API Supabase :

   - Adapter addTask, updateTask, deleteTask
   - Gérer la synchronisation des données
   - Implémenter la gestion des erreurs

2. Migration des données :
   - Implémenter migrateLocalTasks
   - Gérer la transition localStorage -> Supabase
   - Validation des données migrées

### 2.2 Optimisations

- Cache local des données Supabase
- Gestion optimiste des mises à jour
- Gestion hors-ligne

## 3. Roadmap

### 3.1 Court Terme

1. Finaliser intégration Supabase
2. Tests et débogage
3. Optimisations de performance

### 3.2 Moyen Terme

- Système de partage d'agendas
- Statistiques d'utilisation
- Mode hors-ligne complet

## 4. Standards Techniques

### 4.1 État des données

- Supabase comme source principale
- Cache local pour performance
- État React pour UI

### 4.2 Authentification

- Gestion via Supabase Auth
- Sessions persistantes
- Sécurité RLS

### 4.3 Gestion des erreurs

- Retours utilisateur clairs
- Logging des erreurs
- Fallbacks appropriés
